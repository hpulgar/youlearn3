<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>


	<!--Meta Tags-->
        <meta name="viewport" content="width=device-width; initial-scale=1.0"></meta>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		
	<!--Title-->
	<title>Youlearn - Foro</title>


	<link rel="stylesheet" href="css/style.css" type="text/css"  media="all" />
	<link rel="stylesheet" href="css/colour.css" type="text/css"  media="all" />
	<link rel="stylesheet" href="css/flexslider.css" type="text/css"  media="all" />
	<link rel="stylesheet" href="css/superfish.css" type="text/css"  media="all" />
	<link rel="stylesheet" href="css/responsive.css" type="text/css"  media="all" />
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,300italic,400italic,600,600italic,700,700italic,800,800italic' rel='stylesheet' type='text/css'></link>
        <link href='http://fonts.googleapis.com/css?family=Merriweather:400,300,700,900' rel='stylesheet' type='text/css'></link>

	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
	<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js'></script>
	<script type="text/javascript" src="js/superfish.js"></script>
	<script type="text/javascript" src="js/jquery.flexslider-min.js"></script>
	<script type="text/javascript" src="js/tinynav.min.js"></script>
	<script type="text/javascript" src="js/jquery.uniform.js"></script>
	<script type="text/javascript" src="js/scripts.js"></script>
	
<!-- END head -->
   </h:head>
    
    <h:body id="top" class="loading">
  <!-- BEGIN #header-wrapper -->
	<!-- BEGIN #header-wrapper -->
	<div id="header" >
                        
                  <ui:include src="header.xhtml" />
        </div>
	
	<!-- BEGIN .page-header -->
	<div class="page-header clearfix">
		
		<div class="page-header-inner clearfix">
		
		<div class="page-title">	
			<h2>Foro</h2>
			<div class="page-title-block"></div>
		</div>
		
		<div class="breadcrumbs">
			<p><a href="index-2.html">Home</a> &#187; Mi cuenta</p>
		</div>
		
		</div>
		
	<!-- END .page-header -->
	</div>
        
        
	
	<!-- BEGIN .content-wrapper -->
	<div class="content-wrapper page-content-wrapper clearfix">
		
		<!-- BEGIN .main-content -->
		<div class="main-content page-content">
			
			<!-- BEGIN .inner-content-wrapper -->
			<div class="inner-content-wrapper">
			 <h:form>
                                    <h:commandButton action="foro_crear.xhtml" value="Crear Foro" style="float: right"/>
                                	
                            <h3 class="block-title">Crear foro</h3>
                               
                                <div class="course-finder-full clearfix">	
                                <div class="course-finder-icon"></div>  
                                <div class="course-finder-full-form">
                                   
                                    <h:panelGroup id="formulario_busqueda">
                                    
                                    <div class="field-row" id="algo">
					<label for="categoria">Categoria</label>
                                        <h:selectOneMenu value="#{foroCategoriaController.id_cat}" >
                                                
                                            <f:selectItem itemValue="0" itemLabel="Seleccione una Categoria" noSelectionOption="true" /> 
                                            <p:ajax  update="subcategorias"/>
                                                <c:forEach items="#{foroCategoriaController.listaCategorias()}" var="c"> 
                                                    <f:selectItem itemValue="#{c.idCategoria}" itemLabel="#{c.titulo}" />  
                                                    
                                                </c:forEach>
                                             </h:selectOneMenu>
                                    </div>
                                    
                                    <div class="field-row">
				  <label for="subcategoria">Subcategoria</label>
                                  
                                
                                  <h:selectOneMenu value="#{foroSubcategoriaController.id_subCat}" id="subcategorias" >
                                      <f:selectItem itemValue="0" itemLabel="Seleccione una Categoria"  noSelectionOption="true"/> 
                                        <c:forEach items="#{foroSubcategoriaController.listaCategorias(foroCategoriaController.id_cat)}" var="fsc"  >
                                        <f:selectItem itemValue="#{fsc.idSubcategoria}" itemLabel="#{fsc.titulo}" />                                        
                                        </c:forEach>
                                      <p:ajax update="foroListado"/>
                                     </h:selectOneMenu>	
                                  
				</div>
						
                                        
                                        
                                        <label for="Buscar Por nombre">Subcategoria del curso</label>
                                        <h:inputText  value="#{foroPosteosController.tit}" required="false" />
                                        <p:commandButton  value="Buscar" update="foroListado"  process="@all" />
                                        
                                        <p:commandButton  value="Limpiar" update="foroListado"  process="@all" action="#{foroPosteosController.setTit(null)}" actionListener="#{foroSubcategoriaController.setId_subCat(0)}">
                                            <p:ajax update="formulario_busqueda"/>
                                        </p:commandButton>
                                                                
                                                                
					
                                    </h:panelGroup>
                             
                                        </div>
                                </div>
				<h:panelGroup id="foroListado">
                                <table style="width:100%;">
					<thead>
						<tr>
							<th>Fecha</th>
							<th>Nombre tema</th>
							<th>Iniciado por</th>
							<th>Mensajes</th>
                                                        <th>Visitas</th>
						</tr>
					</thead>
					<tbody>
                                            
                                            
                                            
                                                <c:forEach items="#{foroPosteosController.listaForos(foroPosteosController.tit, foroSubcategoriaController.id_subCat)}" var="f" rendered="false">
                                
                                                
						<tr>
                                                    
                                                    
                                                      
                                                   
                                                    <td data-title="fecha">#{f.fecha}</td>
                                                    
                                                    
                                                    <td data-title="" > <h:commandLink action="#{foroPosteosController.verPost(f.idPost)}" value="#{f.titulo}"/></td>                                       
                                                    
                                                    
                                                    <td data-title="iniciado_por">#{f.idUser.username}</td>
                                                    <td data-title="Mensajes">#{masterComentarioController.cuentaMensajes(f.idPost)}</td>
                                                    
                                                        <td data-title="Visitas">#{foroPosteosController.setIdPosteo(f.idPost)} #{f.idPost}</td>
                                                        
						</tr>
                                                    
                                             </c:forEach>
                                                
						
					</tbody>
				</table>
				</h:panelGroup>
				<div class="pagination-wrapper" style="margin: 20px 0 50px 0;">
					<a class="selected" href="#">1</a>
					<a href="#">2</a>
					<a href="#">3</a>
					<a href="#">></a>
				</div>
				
				
				
				
				<div class="clearboth"></div>
			</h:form>
			<!-- END .inner-content-wrapper -->
			</div>
			
		<!-- END .main-content -->
		</div>
		
		<!-- BEGIN .sidebar-right -->
		<div class="sidebar-right page-content">
			
			<!-- BEGIN .content-block -->
			<div class="content-block">
				
				<h3 class="block-title">Acceso rapido</h3>
				
				<ul>
					<li><a href="perfil.xhtml">Mi perfil</a></li>
					<li><a href="#">Mis mensajes</a></li>
					<li><a href="#">Dashboard</a></li>
				
				</ul>
				
			<!-- END .content-block -->	
			</div>
			
			
		
		<!-- END .sidebar-right -->
		</div>
	
	<!-- END .content-wrapper -->
	</div>
        
      
	
	<!-- BEGIN #footer-wrapper -->
	<div id="footer-wrapper">
		
		<!-- BEGIN #footer -->
		<div id="footer">
			
			<ul class="columns-4 clearfix">
				
				<li class="col">
					<div class="widget-title clearfix">
						<h4>Nosotros</h4>
						<div class="widget-title-block"></div>
					</div>
					<p></p>
				</li>
				
                            <li class="col">
					<div class="widget-title clearfix">
						<h4>Creditos</h4>
						<div class="widget-title-block"></div>
					</div>
					<p></p>
				</li>
				
				<li class="col">
					<div class="widget-title clearfix">
						<h4>Mapa del sitio</h4>
						<div class="widget-title-block"></div>
					</div>
					<p></p>
				</li>
				
                            
                            <li class="col">
					<div class="widget-title clearfix">
						<h4>Redes sociales</h4>
						<div class="widget-title-block"></div>
					</div>
					<p></p>
				</li>
				
			
			</ul>
			
			<div id="footer-bottom" class="clearfix">
				<p class="fl">  <a href="#">YouLearn</a></p>
				<p class="go-up fr"><a href="#top" class="scrollup">Top</a></p>
			</div>
		<!-- END #footer -->
		</div>
	
	<!-- END #footer-wrapper -->
	</div>

<!-- END body -->
 </h:body>
    
</html>
